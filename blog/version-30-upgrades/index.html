<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27;; script-src &#x27;self&#x27; &#x27;sha256-OzUnmjMIVuS+lOnNyveodXW96iw8WIDsfo02bVyJTKE=&#x27; &#x27;sha256-wYJVo4gU5DUdhJDQ56tfPvicN5GR2ZCU83HqjxirLDU=&#x27; &#x27;sha256-2yOJyx9RQ51hfM0rXxDzFYbdp3W8URaSzUNGwNU1sJo=&#x27;; style-src &#x27;self&#x27; &#x27;sha256-iPRttki6aOhG2Aa6CsC9019Lreo1PMtoQRAgHNSUm88=&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27;; font-src &#x27;self&#x27; data:; connect-src &#x27;self&#x27;; img-src &#x27;self&#x27; data:;"/><style data-href="/styles.5e6de82e8428e0b0fb59.css" data-identity="gatsby-global-css">/*! tailwindcss v2.2.19 | MIT License | https://tailwindcss.com*/

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-text-size-adjust:100%;line-height:1.15;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:0}hr{color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}legend{padding:0}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid;box-sizing:border-box}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a1a1aa;opacity:1}input::placeholder,textarea::placeholder{color:#a1a1aa;opacity:1}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{color:inherit;line-height:inherit;padding:0}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{border-color:currentColor}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.top-0{top:0}.bottom-0{bottom:0}.left-0{left:0}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.m-3{margin:.75rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mx-5{margin-left:1.25rem;margin-right:1.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-3{margin-bottom:.75rem;margin-top:.75rem}.my-4{margin-bottom:1rem;margin-top:1rem}.my-5{margin-bottom:1.25rem;margin-top:1.25rem}.mt-1{margin-top:.25rem}.mt-3{margin-top:.75rem}.mt-5{margin-top:1.25rem}.mt-8{margin-top:2rem}.mt-12{margin-top:3rem}.mt-20{margin-top:5rem}.mr-2{margin-right:.5rem}.ml-2{margin-left:.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.hidden{display:none}.h-8{height:2rem}.h-12{height:3rem}.h-px{height:1px}.h-full{height:100%}.w-12{width:3rem}.w-auto{width:auto}.w-full{width:100%}.max-w-none{max-width:none}.flex-1{flex:1 1 0%}.transform{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}.resize-none{resize:none}.resize{resize:both}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.overflow-hidden{overflow:hidden}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border-2{border-width:2px}.border-t-2{border-top-width:2px}.border-dashed{border-style:dashed}.border-color-2{--tw-border-opacity:1;border-color:rgba(69,79,91,var(--tw-border-opacity))}.border-primary{--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity))}.border-secondary{--tw-border-opacity:1;border-color:rgba(243,243,243,var(--tw-border-opacity))}.hover\:border-primary:hover{--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity))}.bg-bg{background-color:rgba(25,31,38,var(--tw-bg-opacity))}.bg-bg,.bg-bgalt{--tw-bg-opacity:1}.bg-bgalt{background-color:rgba(0,0,0,var(--tw-bg-opacity))}.stroke-current{stroke:currentColor}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-2px{padding:2px}.px-0{padding-left:0;padding-right:0}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-16{padding-left:4rem;padding-right:4rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-3{padding-bottom:.75rem;padding-top:.75rem}.py-5{padding-bottom:1.25rem;padding-top:1.25rem}.py-6{padding-bottom:1.5rem;padding-top:1.5rem}.py-12{padding-bottom:3rem;padding-top:3rem}.pt-1{padding-top:.25rem}.pt-3{padding-top:.75rem}.pt-24{padding-top:6rem}.pr-12{padding-right:3rem}.pb-6{padding-bottom:1.5rem}.pb-20{padding-bottom:5rem}.pb-24{padding-bottom:6rem}.pl-2{padding-left:.5rem}.text-center{text-align:center}.align-middle{vertical-align:middle}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-7xl{font-size:5rem}.font-bold{font-weight:700}.text-color-default{--tw-text-opacity:1;color:rgba(243,243,243,var(--tw-text-opacity))}.text-color-1{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-color-3{--tw-text-opacity:1;color:rgba(113,221,191,var(--tw-text-opacity))}.text-primary{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-secondary{--tw-text-opacity:1;color:rgba(243,243,243,var(--tw-text-opacity))}.text-link{--tw-text-opacity:1;color:rgba(113,221,191,var(--tw-text-opacity))}.focus\:text-primary:focus,.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.opacity-80{opacity:.8}.hover\:opacity-100:hover{opacity:1}*,:after,:before{--tw-shadow:0 0 #0000}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)}.focus\:shadow-2xl:focus,.hover\:shadow-2xl:hover,.shadow-2xl,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:shadow-2xl:focus,.hover\:shadow-2xl:hover,.shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,.25)}.focus\:outline-none:focus,.outline-none{outline:2px solid transparent;outline-offset:2px}*,:after,:before{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.bg-gradient-primary{background-image:linear-gradient(90deg,#fff,#f3f3f3)}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}:root{--deckgo-highlight-code-carbon-toolbar-display:none;--deckgo-highlight-code-carbon-overflow:scroll;--deckgo-highlight-code-scroll:scroll;--deckgo-highlight-code-width:max-content;--deckgo-highlight-code-carbon-margin:30px 20px}body{font-family:Karla,sans-serif;font-size:16px}p{line-height:165%}.boxed{margin-left:auto;margin-right:auto;max-width:1024px;padding-left:1rem;padding-right:1rem;width:100%}.large-container{max-width:2100px}@media (min-width:1024px){.boxed{max-width:768px}}@media (min-width:1280px){.boxed{max-width:1024px}}.nav .nav-links li{display:inline-block;margin-left:.5rem;margin-right:.5rem;position:relative}.nav .nav-links li a{display:inline-block;padding:.25rem;position:relative;z-index:10}.nav .nav-links li:before{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity));border-radius:9999px;bottom:0;content:"";height:0;left:0;margin:auto;opacity:.25;position:absolute;right:0;top:0;transition:width .25s,height .25s;width:0}.nav .nav-links li.active a,.nav .nav-links li:hover a{color:#71ddbf}.nav .nav-links .theme-switcher:before{display:none}.nav .line{--tw-border-opacity:1;border-bottom:2px dashed;border-color:rgba(69,79,91,var(--tw-border-opacity));transition:width .5s;width:0}.nav.scrolled .line{width:100%}.title h1{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.btn{align-items:center;display:inline-flex;height:3rem;outline:2px solid transparent;outline-offset:2px;overflow:hidden;padding-left:1.5rem;padding-right:1.5rem;position:relative}.btn.disabled{opacity:.5}.btn span{position:relative;z-index:10}.btn .icon-right{margin-left:.75rem}.btn .icon-left{margin-right:.75rem}.btn:focus{--tw-bg-opacity:1;background-color:rgba(69,79,91,var(--tw-bg-opacity));outline:2px solid transparent;outline-offset:2px}.btn-primary{color:#000;margin-bottom:1rem;margin-top:1rem}.btn-primary,.btn-primary:before{--tw-bg-opacity:1;background-color:rgba(113,221,191,var(--tw-bg-opacity))}.btn-primary:focus:before,.btn-primary:hover:before{left:0}.footer-links li{margin-left:.75rem;margin-right:.75rem}.animated-link-parent a{display:inline-block;position:relative}.animated-link-parent a:after{background-image:linear-gradient(90deg,#fff,#f3f3f3);bottom:0;content:"";height:2px;left:0;position:absolute;transition-duration:.3s;transition-property:width;width:0}.animated-link-parent a:active:after,.animated-link-parent a:focus:after,.animated-link-parent a:hover:after{width:100%}.post-content p{margin-bottom:.75rem;margin-top:.75rem}.post-content h1,h2,h3,h4,h5,h6{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity));margin-bottom:2rem;margin-top:2rem}.post-content h1{font-size:3rem;line-height:1}.post-content h2{font-size:2.25rem;line-height:2.5rem}.post-content h3{font-size:1.875rem;line-height:2.25rem}.post-content h4{font-size:1.5rem;line-height:2rem}.post-content h5{font-size:1.25rem;font-size:1.125rem;line-height:1.75rem}.post-content hr{--tw-border-opacity:1;border-color:rgba(207,216,220,var(--tw-border-opacity));margin-bottom:1rem;margin-top:1rem}.post-content ul{list-style:disc}.post-content ol{list-style:decimal}.post-content ol,.post-content ul{margin-left:1rem}.post-content ol ol,.post-content ul ul{margin-left:.75rem}.post-content li{margin-bottom:.5rem;margin-left:1.5rem;margin-top:.5rem}.post-content table{margin-bottom:1.5rem;margin-top:1.5rem;width:100%}.post-content table tr{--tw-border-opacity:1;border-bottom:2px solid #eee;border-color:rgba(207,216,220,var(--tw-border-opacity))}.theme-dark .post-content table tr{border-bottom:2px solid #444}.post-content table tr td,.post-content table tr th{padding:.75rem .5rem;text-align:left}.post-content blockquote{--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity));border-left-width:4px;margin:1.5rem 0;padding:0 .75rem}.post-content iframe{max-width:100%}.input.focused{padding-left:1rem;padding-right:1rem}.spin{animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media (max-width:640px){html{font-size:15px}}.post-content a{--tw-text-opacity:1;color:rgba(113,221,191,var(--tw-text-opacity));margin-bottom:1rem;margin-top:1rem}.post-content pre{background-color:#333;color:#fff;margin:2rem;overflow:scroll;padding:1rem}.post-content img{margin:3rem}.int-title{color:#fff!important}.integration-list{background-color:#fff;margin:30px auto auto;width:90%}.integration-list td{border:3px solid #f8f8f8;padding:8px 13px;vertical-align:top}.integration-list th{border:3px solid #f8f8f8;padding:10px}.int-desc{width:50%}.table-of-contents{background-color:hsla(0,0%,100%,.1);float:right;margin:10px 0 10px 20px;padding:10px 0}.table-of-contents ol{counter-reset:tocnum;list-style:none;margin-left:0;padding-left:10px}.table-of-contents ol li{counter-increment:tocnum;line-height:100%;margin-left:10px;padding-left:0;padding-right:10px}.table-of-contents ol li:before{content:counters(tocnum,".") ". ";font-weight:700}code{background-color:hsla(0,0%,100%,.1);font-size:.85rem;padding:.25rem .5rem}h1,h2,h3,h4,h5,h6{margin-bottom:1.5rem;margin-top:1.5rem}.blog-item{background-color:hsla(0,0%,100%,.1)}.nowrap{white-space:nowrap}@media (min-width:640px){.sm\:w-full{width:100%}}@media (min-width:768px){.md\:-mt-16{margin-top:-4rem}.md\:w-1\/2{width:50%}.md\:w-11\/12{width:91.666667%}.md\:px-4{padding-left:1rem;padding-right:1rem}}@media (min-width:1024px){.lg\:order-1{order:1}.lg\:order-2{order:2}.lg\:order-3{order:3}.lg\:order-4{order:4}.lg\:order-5{order:5}.lg\:box-content{box-sizing:content-box}.lg\:block{display:block}.lg\:flex{display:flex}.lg\:hidden{display:none}.lg\:h-auto{height:auto}.lg\:w-1\/2{width:50%}.lg\:w-1\/3{width:33.333333%}.lg\:w-3\/4{width:75%}.lg\:w-full{width:100%}.lg\:justify-between{justify-content:space-between}.lg\:p-4{padding:1rem}.lg\:px-0{padding-left:0;padding-right:0}.lg\:py-14{padding-bottom:3.5rem}.lg\:pt-14,.lg\:py-14{padding-top:3.5rem}.lg\:pr-12{padding-right:3rem}.lg\:pl-8{padding-left:2rem}.lg\:pl-12{padding-left:3rem}.lg\:text-left{text-align:left}.lg\:text-xl{font-size:1.25rem;line-height:1.75rem}.lg\:text-2xl{font-size:1.5rem;line-height:2rem}.lg\:text-4xl{font-size:2.25rem;line-height:2.5rem}.lg\:text-6xl{font-size:3.75rem;line-height:1}.lg\:text-color-default{--tw-text-opacity:1;color:rgba(243,243,243,var(--tw-text-opacity))}}</style><meta name="generator" content="Gatsby 3.15.0"/><title data-react-helmet="true">Marquez 0.30.0 offers a big performance bump, with some assembly required | Marquez</title><link data-react-helmet="true" rel="icon" href="/images/icon.svg" type="image/png"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Karla&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" name="description" content="How to ensure a smooth transition to the latest version of Marquez."/><meta data-react-helmet="true" property="og:title" content="Marquez 0.30.0 offers a big performance bump, with some assembly required"/><meta data-react-helmet="true" property="og:description" content="How to ensure a smooth transition to the latest version of Marquez."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@marquezproject"/><meta data-react-helmet="true" name="twitter:title" content="Marquez 0.30.0 offers a big performance bump, with some assembly required"/><meta data-react-helmet="true" name="twitter:description" content="How to ensure a smooth transition to the latest version of Marquez."/><meta data-react-helmet="true" property="og:image" content="/static/ab471c310f1afc91147b39e98312007d/banner.svg"/><script data-react-helmet="true" defer="" data-domain="marquezproject.ai" src="https://plausible.io/js/script.outbound-links.js"></script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link as="script" rel="preload" href="/webpack-runtime-ac631bc83f84f0050133.js"/><link as="script" rel="preload" href="/framework-9673613bfd17bae9789c.js"/><link as="script" rel="preload" href="/app-3692e1a812d99b06223e.js"/><link as="script" rel="preload" href="/commons-c7f134c2e3f35bc380f3.js"/><link as="script" rel="preload" href="/03af1e3b4838e2bf1feefdfdd4602b9a79f8e4c9-0c269efc03063054b6ed.js"/><link as="script" rel="preload" href="/component---src-templates-blog-tsx-23562e41a26811f889ac.js"/><link as="fetch" rel="preload" href="/page-data/blog/version-30-upgrades/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1139857438.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1946588481.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2083862410.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2418326273.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/273606341.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3067102388.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="wrapper theme-light"><div class="text-color-default bg-bg"><div class="duration-300 transition-all flex justify-center lg:justify-between items-center z-20 fixed w-full nav p-5"><button class="absolute text-primary outline-0 lg:hidden" style="transform:translateY(-50%);top:50%;left:10px"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button><div class="r-swipe-sidebar-container" style="position:absolute"><div class="r-swipe-sidebar" style="position:fixed;left:-100%;width:70%;height:100%;top:0;z-index:9999;transition-property:left;transition-duration:0s;transition-timing-function:linear;transform:translate3d(0,0,0)"><div class="bg-bg h-full flex flex-col justify-center relative"><div class="absolute top-0 my-4 text-center w-full"><a title="Marquez" class="inline-block" href="/"><img src="/images/logo-lfai.svg" alt="Marquez - logo" class="duration-300 transition-all h-12"/></a></div><div class="text-center"><ul class=""><li class="block my-2 "><a title="Home" class="text-color-1 focus:text-primary" href="/"><span>Home</span></a></li><li class="block my-2 "><a title="About" class="text-color-1 focus:text-primary" href="/about"><span>About</span></a></li><li class="block my-2 "><a title="Quickstart" class="text-color-1 focus:text-primary" href="/quickstart"><span>Quickstart</span></a></li><li class="block my-2 "><a title="FAQ" class="text-color-1 focus:text-primary" href="/resources/faq"><span>FAQ</span></a></li><li class="block my-2 "><a title="Resources" class="text-color-1 focus:text-primary" href="/resources"><span>Resources</span></a></li><li class="block my-2 active"><a title="Blog" class="text-color-1 focus:text-primary" href="/blog"><span>Blog</span></a></li></ul></div></div></div><div class="r-swipe-sidebar-overlay" role="button" tabindex="-1" style="position:fixed;top:0;bottom:0;left:-100%;width:100%;height:100%;background:#000;z-index:9998;transition-property:opacity;transition-duration:0s;opacity:0"></div></div><a title="Marquez" href="/"><img src="/images/logo-lfai.svg" alt="Marquez - logo" class="duration-300 transition-all h-12"/></a><div class="hidden lg:block"><ul class="nav-links flex"><li class=" "><a title="Home" class="text-color-1 focus:text-primary" href="/"><span>Home</span></a></li><li class=" "><a title="About" class="text-color-1 focus:text-primary" href="/about"><span>About</span></a></li><li class=" "><a title="Quickstart" class="text-color-1 focus:text-primary" href="/quickstart"><span>Quickstart</span></a></li><li class=" "><a title="FAQ" class="text-color-1 focus:text-primary" href="/resources/faq"><span>FAQ</span></a></li><li class=" "><a title="Resources" class="text-color-1 focus:text-primary" href="/resources"><span>Resources</span></a></li><li class=" active"><a title="Blog" class="text-color-1 focus:text-primary" href="/blog"><span>Blog</span></a></li></ul></div><div class="absolute line h-px left-0 bottom-0 bg-gradient-primary"></div></div><div style="height:0px"></div><div class="md:px-4 mt-12 py-6 md:w-11/12 mx-auto"><div class="mx-auto relative"><img src="/static/ab471c310f1afc91147b39e98312007d/banner.svg" alt="&#x27;&#x27;"/><div class="relative w-full lg:w-3/4 md:w-11/12 sm:w-full p-6 box-border lg:box-content mx-auto bg-bg text-color-default blog-wall-content shadow-xl md:-mt-16 "><div class="p-3"><h1 class="text-5xl font-bold text-primary">Marquez 0.30.0 offers a big performance bump, with some assembly required</h1><p class="mt-1 flex"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> <span class="ml-2">03 February 2023<!-- --> by <!-- -->Michael Robinson</span></p><p class="mt-3">How to ensure a smooth transition to the latest version of Marquez.</p></div></div></div><div class="lg:w-3/4 md:w-11/12 sm:w-full p-3 mx-auto mt-12 post-content"><h2 id="marquez-0300">Marquez 0.30.0</h2><p><a href="https://github.com/MarquezProject/marquez/releases/tag/0.30.0">Marquez 0.30.0</a>,
which we released on 2023-01-31, contains some exciting new features, including
<a href="https://github.com/MarquezProject/marquez/pull/2293">column-level lineage</a> and
a <a href="https://github.com/MarquezProject/marquez/pull/2343">soft delete option</a> in
the UI.</p><p>Along with these long-awaited UI upgrades come some significant performance
improvements to the API. In prior versions of Marquez, accessing OpenLineage
facets required direct queries against the OpenLineage events table, which could
be quite costly depending on the size of this table. Some users have events
tables with more than 100K rows -- millions of rows, in fact. To address this
performance issue, Marquez 0.30.0 has new tables for dataset, job and run facets.</p><p>So far, so simple, right? Protecting against data loss and ensuring a smooth
experience for users was not so simple, in fact. We needed a way to migrate the
data while not only avoiding loss but also keeping downtime to a minimum. The
solution that <a href="https://github.com/wslulciuc">Willy</a> and
<a href="https://github.com/pawel-big-lebowski">Pawel</a> found (with input from
<a href="https://github.com/collado-mike">Mike Collado</a>) was to keep the data in the
events table until the migration process is complete and to create views on top
of the table for accessing the facets. After migration is complete, the views
are replaced to point to the new tables. Using views provides safeguards and
minimizes downtime during the migration. </p><h2 id="migration-procedure">Migration Procedure</h2><p>As the
<a href="https://github.com/MarquezProject/marquez/blob/main/api/src/main/resources/marquez/db/migration/V57__readme.md">migration plan</a>
says, users whose <code>lineage_events</code> tables have up to 100K rows can set it and
forget it -- no extra work is required beyond upgrading and restarting
Marquez, but be prepared for a brief downtime while a standard Flyway migration
fills the newly created tables automatically.</p><p>For heavy users whose <code>lineage_events</code> tables have more than 100K rows, a
different process will be used. Instead of a standard migration, the process will
happen asynchronously so that the user can start the API and consume new
OpenLineage events as usual. Note that some API calls might return results
slowly during the migration, especially if the output is based on facets.</p><p>To perform a migration, these users must run a new <code>db-migrate</code> command:</p><deckgo-highlight-code terminal="carbon">
          <code slot="code">java -jar api/build/libs/marquez-api-0.30.0.jar db-migrate --version v57 ./marquez.yml</code>
        </deckgo-highlight-code><p>Available command arguments, <code>version</code> (required) and <code>chunkSize</code> (optional),
allow the user to specify the migration version to apply and the number of
lineage events to process (the default being 10,000). The command will process
the data not in its entirety but in chunks, storing a state with information
about the chunks being processed. Consequently,</p><ul><li>it can be stopped any time</li><li>it will continue automatically and process the remaining chunks. </li></ul><p>A sample command specifying version 57 and 50,000 events:</p><deckgo-highlight-code terminal="carbon">
          <code slot="code">java -jar api/build/libs/marquez-api-0.30.0.jar db-migrate --version v57 --chunkSize 50000 ./marquez.yml</code>
        </deckgo-highlight-code><h2 id="more-information">More Information</h2><p>For more details about what, if anything, you will need to do to ensure a smooth
transition to Marquez 0.30.0, check out the helpful
<a href="https://github.com/MarquezProject/marquez/blob/main/api/src/main/resources/marquez/db/migration/V57__readme.md">migration plan</a>
put together by <a href="https://github.com/wslulciuc">Willy</a> and
<a href="https://github.com/pawel-big-lebowski">Pawel</a>. </p><p>For more information about the improvements and additions in Marquez 0.30.0, check
out <a href="https://github.com/MarquezProject/marquez/releases/tag/0.30.0">the release on GitHub</a>.</p></div></div><footer class="border-t-2 border-dashed border-color-2 footer py-12"><div class="container mx-auto text-center"><div class="text-color-1 my-3"><ul><li class="inline-block mx-3 animated-link-parent"><a href="https://fosstodon.org/@marquez" title="Mastodon" rel="me"><span>Mastodon</span></a></li><li class="inline-block mx-3 animated-link-parent"><a href="https://twitter.com/MarquezProject" title="Twitter" rel=""><span>Twitter</span></a></li><li class="inline-block mx-3 animated-link-parent"><a href="https://bit.ly/MqzSlack" title="Slack" rel=""><span>Slack</span></a></li><li class="inline-block mx-3 animated-link-parent"><a href="https://github.com/MarquezProject/marquez" title="GitHub" rel=""><span>GitHub</span></a></li><li class="inline-block mx-3 animated-link-parent"><a href="https://bit.ly/MarquezMeet" title="Wiki" rel=""><span>Wiki</span></a></li><li class="inline-block mx-3 animated-link-parent"><a href="https://bit.ly/MarquezYouTube" title="YouTube" rel=""><span>YouTube</span></a></li></ul></div><p class="text-color-default text-lg">Copyright © <!-- -->2023<!-- --> The Linux Foundation<sup>®</sup>. All rights reserved.</p></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9S43L0BB9X"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-9S43L0BB9X', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/version-30-upgrades/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a4d91ec470dc87112fde.js"],"app":["/app-3692e1a812d99b06223e.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-4c00d3f0382605017f8b.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-347c19253bb5c7bb14ac.js"],"component---src-templates-basepages-tsx":["/component---src-templates-basepages-tsx-b2acdebb84428e7c238a.js"],"component---src-templates-blog-list-tsx":["/component---src-templates-blog-list-tsx-ea9b093179436a478287.js"],"component---src-templates-blog-tsx":["/component---src-templates-blog-tsx-23562e41a26811f889ac.js"]};/*]]>*/</script><script src="/polyfill-a4d91ec470dc87112fde.js" nomodule=""></script><script src="/component---src-templates-blog-tsx-23562e41a26811f889ac.js" async=""></script><script src="/03af1e3b4838e2bf1feefdfdd4602b9a79f8e4c9-0c269efc03063054b6ed.js" async=""></script><script src="/commons-c7f134c2e3f35bc380f3.js" async=""></script><script src="/app-3692e1a812d99b06223e.js" async=""></script><script src="/framework-9673613bfd17bae9789c.js" async=""></script><script src="/webpack-runtime-ac631bc83f84f0050133.js" async=""></script></body></html>
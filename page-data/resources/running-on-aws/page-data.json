{
    "componentChunkName": "component---src-templates-basepages-tsx",
    "path": "/resources/running-on-aws/",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"layout\": \"running-on-aws\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"running-marquez-on-aws\"\n  }, \"Running Marquez on AWS\"), mdx(\"p\", null, \"This guide helps you deploy and manage Marquez on AWS \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://aws.amazon.com/eks\"\n  }, \"EKS\"), \".\"), mdx(\"h4\", {\n    \"id\": \"prerequisites\"\n  }, \"PREREQUISITES\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html\"\n  }, \"AWS CLI\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://helm.sh/docs/helm/helm_install/\"\n  }, \"helm\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://kubernetes.io/docs/tasks/tools/\"\n  }, \"kubectl\"))), mdx(\"h2\", {\n    \"id\": \"aws-eks-cluster\"\n  }, \"AWS EKS Cluster\"), mdx(\"p\", null, \"To create an AWS EKS cluster, please follow the steps outlined in the AWS EKS \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html\"\n  }, \"documentation\"), \".\"), mdx(\"h5\", {\n    \"id\": \"connect-to-aws-eks-cluster\"\n  }, \"CONNECT TO AWS EKS CLUSTER\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Make sure you have configured your \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\"\n  }, \"AWS CLI\"), \", then create or update the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kubeconfig\"), \" file for your cluster:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"$ aws eks --region <AWS-REGION> update-kubeconfig --name <AWS-EKS-CLUSTER>\"), \"\\n        \")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Verify that the context has been switched:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"$ kubectl config current-context\\narn:aws:eks:<AWS-REGION>:<AWS-ACCOUNT-ID>:cluster/<AWS-EKS-CLUSTER>\"), \"\\n        \")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl\"), \", verify that you can connect to your cluster:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"$ kubectl get svc\\nNAME             TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE\\nsvc/kubernetes   ClusterIP   10.100.0.1   <none>        443/TCP   1m\"), \"\\n        \"), mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \": If you're having issues connecting to your cluster, please see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://aws.amazon.com/premiumsupport/knowledge-center/eks-cluster-connection\"\n  }, \"Why can't I connect to my AWS EKS cluster?\"))))), mdx(\"h2\", {\n    \"id\": \"aws-rds\"\n  }, \"AWS RDS\"), mdx(\"p\", null, \"Next, create an AWS RDS instance as outlined in the AWS RDS \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateDBInstance.html\"\n  }, \"documentation\"), \". This database will be used to store dataset, job, and run metadata collected as \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://openlineage.io\"\n  }, \"OpenLineage\"), \" events via the Marquez \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://marquezproject.github.io/marquez/openapi.html\"\n  }, \"HTTP API\"), \".\"), mdx(\"h5\", {\n    \"id\": \"create-aws-rds-database\"\n  }, \"CREATE AWS RDS DATABASE\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Navigate to the AWS \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://console.aws.amazon.com/rds/home\"\n  }, \"RDS\"), \" page and create a PostgreSQL database, leaving the database template as \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Production\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"marquez\"), \" as the database identifier and set the master username to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"marquez\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Choose a master password to use later in your Helm deployment (see \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/MarquezProject/marquez/blob/main/chart/values.yaml#L32\"\n  }, \"password\"), \"  in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"values.yaml\"), \").\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Leave public access to the database \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"off\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Choose the same VPC where your AWS EKS cluster resides.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In a separate tab, navigate to the AWS EKS cluster page and make note of the security group attached to your cluster.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Navigate back to the AWS RDS page and, in the security group section, add the AWS EKS cluster\\u2019s security group from \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"step 6\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Next, under the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Additional Configuration\"), \" tab, enter \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"marquez\"), \" as the initial database name.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Finally, select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Create Database\"), \".\")), mdx(\"h5\", {\n    \"id\": \"connect-to-aws-rds-database\"\n  }, \"CONNECT TO AWS RDS DATABASE\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"marquez\"), \" namespace:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"$ kubectl create namespace marquez\"), \"\\n        \")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Next, run the following command with your AWS RDS \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"host\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"username\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"password\"), \":\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"kubectl run pgsql-postgresql-client --rm --tty -i --restart='Never' \\\\\\n  --namespace marquez \\\\\\n  --image docker.io/bitnami/postgresql:12-debian-10 \\\\\\n  --env=\\\"PGPASSWORD=<AWS-RDS-PASSWORD>\\\" \\\\\\n  --command -- psql marquez --host <AWS-RDS-HOST> -U <AWS-RDS-USERNAME> -d marquez -p 5432\"), \"\\n        \"))), mdx(\"h2\", {\n    \"id\": \"deploy-marquez-on-aws-eks\"\n  }, \"Deploy Marquez on AWS EKS\"), mdx(\"h5\", {\n    \"id\": \"installing-marquez\"\n  }, \"INSTALLING MARQUEZ\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Get Marquez:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"$ git clone git@github.com:MarquezProject/marquez.git && cd chart\"), \"\\n        \")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Install Marquez:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"helm upgrade --install marquez .\\n  --set marquez.db.host=<AWS-RDS-HOST>\\n  --set marquez.db.user=<AWS-RDS-USERNAME>\\n  --set marquez.db.password=<AWS-RDS-PASSWORD>\\n  --namespace marquez\\n  --atomic\\n  --wait\"), \"\\n        \"), mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" To avoid overriding deployment settings via the command line, update the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MarquezProject/marquez/blob/main/chart/values.yaml#L27\"\n  }, \"marquez.db\"), \" section of the Marquez Helm chart's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"values.yaml\"), \" to include the AWS RDS \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"host\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"username\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"password\"), \" in your deployment.\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Verify all the pods have come up correctly:\"), mdx(\"deckgo-highlight-code\", {\n    parentName: \"li\",\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"$ kubectl get pods --namespace marquez\"), \"\\n        \"))), mdx(\"h5\", {\n    \"id\": \"uninstalling-marquez\"\n  }, \"UNINSTALLING MARQUEZ\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"helm uninstall marquez --namespace marquez\"), \"\\n        \"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"","image":null,"description":null}}},"pageContext":{"slug":"/resources/running-on-aws/"}},
    "staticQueryHashes": ["1139857438","1946588481","2083862410","2213455283","2418326273","3067102388"]}
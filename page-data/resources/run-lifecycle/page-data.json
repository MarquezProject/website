{
    "componentChunkName": "component---src-templates-basepages-tsx",
    "path": "/resources/run-lifecycle/",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"lifecycle\"\n  }, \"Lifecycle\"), mdx(\"p\", null, \"Marquez captures the runs of a job, and changes as they happen.\"), mdx(\"p\", null, \"Run states:\"), mdx(\"deckgo-highlight-code\", {\n    \"terminal\": \"carbon\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"NEW -(start)-> RUNNING -(complete)-> COMPLETED\\n                       -(abort)-> ABORTED\\n                       -(fail)-> FAILED\"), \"\\n        \"), mdx(\"h2\", {\n    \"id\": \"static-inspection-of-job-lineage\"\n  }, \"Static inspection of job lineage\"), mdx(\"p\", null, \"When the job lineage can be inspected from its static definition the metadata is captured as follows:\"), mdx(\"h3\", {\n    \"id\": \"when-the-run-of-the-job-starts\"\n  }, \"When the run of the job starts\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{name} (for every namespace referred to below)\\nBefore referring to a namespace we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /sources/{name} (for every source referred to by a dataset below)\\nBefore referring to a datasource we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every dataset referred to as an input or output of the job below)\\nBefore referring to an input or output dataset we must ensure its metadata has been updated. This is the dataset as it is inspected before the job starts.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/jobs/{name}\\nNow that we have updated all the dependencies of the job we can update the job itself\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs\\nWe create a run for this job\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs/{id}/start\\nWe start the run\")), mdx(\"h3\", {\n    \"id\": \"when-the-run-of-the-job-ends\"\n  }, \"When the run of the job ends\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every dataset the job wrote to during that run)\\nWe update the definition of each dataset this job wrote to during the run. The dataset updates \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"must\"), \" refer to the runId. For example the schema might have changed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs/{id}/complete\\nWe mark the run as succeful (similarly 'fail' for a failed job)\")), mdx(\"h2\", {\n    \"id\": \"dynamic-inspection-of-job-lineage\"\n  }, \"Dynamic inspection of job lineage\"), mdx(\"p\", null, \"If the job can not be introspected statically, we will have to capture the information as the job is running. Then all the updates will be sent when the job is actually completing. (both steps above are executed when the job finishes)\"), mdx(\"h3\", {\n    \"id\": \"when-the-run-of-the-job-starts-1\"\n  }, \"When the run of the job starts\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{name} (for every namespace referred to below)\\nBefore referring to a namespace we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/jobs/{name}\\nWe can update the job itself, but we don't know the inputs and outputs yet\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs\\nWe create a run for this job\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs/{id}/start\\nWe start the run\")), mdx(\"h3\", {\n    \"id\": \"when-the-run-of-the-job-ends-1\"\n  }, \"When the run of the job ends\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /sources/{name} (for every source referred to by a dataset below)\\nBefore referring to a datasource we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every input dataset)\\nBefore referring to an input, we need to make sure its metadata has been updated. (We will not refer to the runid in those calls)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every dataset the job wrote to during that run)\\nWe update the definition of each dataset this job wrote to during the run. The dataset updates \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"must\"), \" refer to the runId that produced. For example the schema might have changed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/jobs/{name}\\nNow that we have updated all the dependencies of the job we can update the job itself, we \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"must\"), \" refer to the runId that this is for.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs/{id}/complete\\nWe mark the run as successful (similarly 'fail' for a failed job)\")), mdx(\"h2\", {\n    \"id\": \"unified-case\"\n  }, \"Unified case\"), mdx(\"h3\", {\n    \"id\": \"when-the-run-of-the-job-starts-2\"\n  }, \"When the run of the job starts\"), mdx(\"h4\", {\n    \"id\": \"extract-info-from-the-job\"\n  }, \"extract info from the job\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{name} (for every namespace referred to below)\\nBefore referring to a namespace we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"if we could extract inputs and outputs\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /sources/{name} (for every source referred to by a dataset below)\\nBefore referring to a datasource we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every dataset referred to as an input or ouput of the job below)\\nOnly if the inputs and outputs were extracted by the extractor.\\nBefore referring to an input or output dataset we must ensure its metadata has been updated. This is the dataset as it is inspected before the job starts.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/jobs/{name}\\nNow that we have updated all the dependencies of the job we can update the job itself\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs\\nWe create a run for this job\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs/{id}/start\\nWe start the run\")), mdx(\"h3\", {\n    \"id\": \"when-the-run-of-the-job-ends-2\"\n  }, \"When the run of the job ends\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /sources/{name} (for every source referred to by a dataset below)\\nBefore referring to a datasource we must ensure its metadata has been updated\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every input dataset)\\nBefore referring to an input, we need to make sure its metadata has been updated. (We will not refer to the runId in those calls)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/datasets/{name} (for every dataset the job wrote to during that run)\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"if the job was successful:\\nWe update the definition of each dataset this job wrote to during the run. The dataset updates \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"must refer to the runId\"), \" that produced. For example the schema might have changed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"if the job failed: we update the output job but \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"we don't refer to the runId\"), \" because the run did not modify the dataset\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT /namespaces/{namespace}/jobs/{name}\\nNow that we have updated all the dependencies of the job we can update the job itself, we \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"must refer to the runId\"), \" that this is for.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST /namespaces/{namespace}/jobs/{name}/runs/{id}/complete\\nWe mark the run as successful (similarly 'fail' for a failed job)\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"","image":null,"description":null}}},"pageContext":{"slug":"/resources/run-lifecycle/"}},
    "staticQueryHashes": ["1139857438","1946588481","2083862410","2213455283","2418326273","3067102388"]}